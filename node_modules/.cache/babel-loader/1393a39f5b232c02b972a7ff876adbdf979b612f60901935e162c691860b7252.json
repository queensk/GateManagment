{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport jwtDecode from 'jwt-decode';\nfunction useAuthenticator() {\n  _s();\n  const [authenticated, setAuthenticated] = useState(false);\n  const [userName, setUserName] = useState('');\n  const [userId, setUserId] = useState('');\n  const [userEmail, setUserEmail] = useState('');\n  const [userRole, setUserRole] = useState('');\n  const token = localStorage.getItem('gateManagementApi');\n  useEffect(() => {\n    if (token) {\n      const decode = jwtDecode(token);\n      const currentTime = new Date().getTime() / 1000;\n      if (decode.exp > currentTime) {\n        setAuthenticated(true);\n        setUserName(decode.user_name);\n        setUserId(decode.user_id);\n        setUserEmail(decode.user_email);\n        setUserRole(decode.role);\n      } else {\n        setAuthenticated(false);\n        setUserName(null);\n      }\n    } else {\n      setAuthenticated(false);\n      setUserName('');\n      setUserId('');\n      setUserEmail('');\n      setUserRole('');\n    }\n  }, [authenticated, token, userName, userId, userEmail, userRole]);\n  return {\n    authenticated,\n    userName,\n    userId,\n    userRole,\n    setAuthenticated\n  };\n}\n_s(useAuthenticator, \"Wp5Yx/dqhjutE1P8wWCUQOWGgSk=\");\nexport default useAuthenticator;","map":{"version":3,"names":["useState","useEffect","jwtDecode","useAuthenticator","authenticated","setAuthenticated","userName","setUserName","userId","setUserId","userEmail","setUserEmail","userRole","setUserRole","token","localStorage","getItem","decode","currentTime","Date","getTime","exp","user_name","user_id","user_email","role"],"sources":["C:/GateManagment/frontend/src/CustomHooks/UseAuthenticator/useAuthenticator.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport jwtDecode from 'jwt-decode';\r\n\r\n\r\nfunction useAuthenticator() {\r\n    const [authenticated, setAuthenticated] = useState(false);\r\n    const [userName, setUserName] = useState('');\r\n    const [userId, setUserId] = useState('');\r\n    const [userEmail, setUserEmail] = useState('');\r\n    const [userRole, setUserRole] = useState('');\r\n    const token = localStorage.getItem('gateManagementApi');\r\n\r\n    useEffect(() =>{\r\n        \r\n        if (token){\r\n            const decode = jwtDecode(token);\r\n            const currentTime = new Date().getTime()/1000\r\n            if (decode.exp > currentTime){\r\n                setAuthenticated(true)\r\n                setUserName(decode.user_name)\r\n                setUserId(decode.user_id)\r\n                setUserEmail(decode.user_email)\r\n                setUserRole(decode.role)\r\n            }\r\n            else{\r\n                setAuthenticated(false)\r\n                setUserName(null)\r\n            }\r\n        }\r\n        else{\r\n            setAuthenticated(false);\r\n            setUserName('');\r\n            setUserId('');\r\n            setUserEmail('');\r\n            setUserRole('');\r\n        }\r\n    }, [authenticated, token, userName, userId, userEmail, userRole])\r\n\r\n  return  {authenticated, userName, userId, userRole, setAuthenticated}\r\n\r\n}\r\nexport default useAuthenticator;\r\n"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,OAAOC,SAAS,MAAM,YAAY;AAGlC,SAASC,gBAAgB,GAAG;EAAA;EACxB,MAAM,CAACC,aAAa,EAAEC,gBAAgB,CAAC,GAAGL,QAAQ,CAAC,KAAK,CAAC;EACzD,MAAM,CAACM,QAAQ,EAAEC,WAAW,CAAC,GAAGP,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACQ,MAAM,EAAEC,SAAS,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM,CAACU,SAAS,EAAEC,YAAY,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAACY,QAAQ,EAAEC,WAAW,CAAC,GAAGb,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAMc,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,mBAAmB,CAAC;EAEvDf,SAAS,CAAC,MAAK;IAEX,IAAIa,KAAK,EAAC;MACN,MAAMG,MAAM,GAAGf,SAAS,CAACY,KAAK,CAAC;MAC/B,MAAMI,WAAW,GAAG,IAAIC,IAAI,EAAE,CAACC,OAAO,EAAE,GAAC,IAAI;MAC7C,IAAIH,MAAM,CAACI,GAAG,GAAGH,WAAW,EAAC;QACzBb,gBAAgB,CAAC,IAAI,CAAC;QACtBE,WAAW,CAACU,MAAM,CAACK,SAAS,CAAC;QAC7Bb,SAAS,CAACQ,MAAM,CAACM,OAAO,CAAC;QACzBZ,YAAY,CAACM,MAAM,CAACO,UAAU,CAAC;QAC/BX,WAAW,CAACI,MAAM,CAACQ,IAAI,CAAC;MAC5B,CAAC,MACG;QACApB,gBAAgB,CAAC,KAAK,CAAC;QACvBE,WAAW,CAAC,IAAI,CAAC;MACrB;IACJ,CAAC,MACG;MACAF,gBAAgB,CAAC,KAAK,CAAC;MACvBE,WAAW,CAAC,EAAE,CAAC;MACfE,SAAS,CAAC,EAAE,CAAC;MACbE,YAAY,CAAC,EAAE,CAAC;MAChBE,WAAW,CAAC,EAAE,CAAC;IACnB;EACJ,CAAC,EAAE,CAACT,aAAa,EAAEU,KAAK,EAAER,QAAQ,EAAEE,MAAM,EAAEE,SAAS,EAAEE,QAAQ,CAAC,CAAC;EAEnE,OAAQ;IAACR,aAAa;IAAEE,QAAQ;IAAEE,MAAM;IAAEI,QAAQ;IAAEP;EAAgB,CAAC;AAEvE;AAAC,GApCQF,gBAAgB;AAqCzB,eAAeA,gBAAgB"},"metadata":{},"sourceType":"module","externalDependencies":[]}